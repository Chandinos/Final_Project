[
  {
    "objectID": "Modeling.html",
    "href": "Modeling.html",
    "title": "Modeling",
    "section": "",
    "text": "This page will contain model fitting, tuning, and final model selection for the ST 558 final project."
  },
  {
    "objectID": "EDA.html",
    "href": "EDA.html",
    "title": "EDA",
    "section": "",
    "text": "Introduction\nThe purpose of this exploratory data analysis (EDA) is to develop an understanding of the Diabetes Health Indicators BRFSS 2015 dataset. This dataset contains a variety of demographic, behavioral, and clinical health variables collected through the Behavioral Risk Factor Surveillance System.\nAfter completing the EDA, the next step will be to build models that predict whether a person has diabetes using the variables in this dataset. Our goal is to compare different modeling approaches to see which one predicts the binary diabetes indicator (0 = No, 1 = Yes) most accurately. Because the predictors include a mix of demographic, behavioral, and clinical information, we will test models that can handle different types of data and look for patterns that might help improve prediction performance.\n\n\nData Overview\n\n#Basic structure and first few rows of the dataset\nhead(diabetes)\n\n# A tibble: 6 × 22\n  diabetes_binary high_bp high_chol chol_check   bmi smoker stroke\n            &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n1               0       1         1          1    40      1      0\n2               0       0         0          0    25      1      0\n3               0       1         1          1    28      0      0\n4               0       1         0          1    27      0      0\n5               0       1         1          1    24      0      0\n6               0       1         1          1    25      1      0\n# ℹ 15 more variables: heart_diseaseor_attack &lt;dbl&gt;, phys_activity &lt;dbl&gt;,\n#   fruits &lt;dbl&gt;, veggies &lt;dbl&gt;, hvy_alcohol_consump &lt;dbl&gt;,\n#   any_healthcare &lt;dbl&gt;, no_docbc_cost &lt;dbl&gt;, gen_hlth &lt;dbl&gt;, ment_hlth &lt;dbl&gt;,\n#   phys_hlth &lt;dbl&gt;, diff_walk &lt;dbl&gt;, sex &lt;dbl&gt;, age &lt;dbl&gt;, education &lt;dbl&gt;,\n#   income &lt;dbl&gt;\n\nglimpse(diabetes)\n\nRows: 253,680\nColumns: 22\n$ diabetes_binary        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0,…\n$ high_bp                &lt;dbl&gt; 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1,…\n$ high_chol              &lt;dbl&gt; 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0,…\n$ chol_check             &lt;dbl&gt; 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ bmi                    &lt;dbl&gt; 40, 25, 28, 27, 24, 25, 30, 25, 30, 24, 25, 34,…\n$ smoker                 &lt;dbl&gt; 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0,…\n$ stroke                 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,…\n$ heart_diseaseor_attack &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,…\n$ phys_activity          &lt;dbl&gt; 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 1,…\n$ fruits                 &lt;dbl&gt; 0, 0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0,…\n$ veggies                &lt;dbl&gt; 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0,…\n$ hvy_alcohol_consump    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ any_healthcare         &lt;dbl&gt; 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ no_docbc_cost          &lt;dbl&gt; 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,…\n$ gen_hlth               &lt;dbl&gt; 5, 3, 5, 2, 2, 2, 3, 3, 5, 2, 3, 3, 3, 4, 4, 2,…\n$ ment_hlth              &lt;dbl&gt; 18, 0, 30, 0, 3, 0, 0, 0, 30, 0, 0, 0, 0, 0, 30…\n$ phys_hlth              &lt;dbl&gt; 15, 0, 30, 0, 0, 2, 14, 0, 30, 0, 0, 30, 15, 0,…\n$ diff_walk              &lt;dbl&gt; 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0, 0,…\n$ sex                    &lt;dbl&gt; 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0,…\n$ age                    &lt;dbl&gt; 9, 7, 9, 11, 11, 10, 9, 11, 9, 8, 13, 10, 7, 11…\n$ education              &lt;dbl&gt; 4, 6, 4, 3, 5, 6, 6, 4, 5, 4, 6, 5, 5, 4, 6, 6,…\n$ income                 &lt;dbl&gt; 3, 1, 8, 6, 4, 8, 7, 4, 1, 3, 8, 1, 7, 6, 2, 8,…\n\n\nThe Diabetes Health Indicators BRFSS 2015 dataset contains a large collection of health-related variables gathered from adult survey respondents. Each row represents an individual, and each column corresponds to a specific health, demographic, or behavioral indicator.\nThis dataset includes: + diabetes_binary variable whether an individual has diabetes or not (our goal is to predict this variable) + Behavioral factors such as smoking status and physical activity. + Demographic variables such as sex and age category. + Clinical indicators such as BMI, high cholesterol, and high blood pressure.\nThe dataset includes different types of variables—numbers, yes/no indicators, and ordered categories—so it’s important to understand what each one looks like before modeling. The following sections explore these variables, how they are distributed, and how they connect to diabetes.\n\n\nVariable Type Conversion and Missingness Check\nBecause the dataset contains a mixture of binary health indicators, ordinal survey responses, and continuous measurements, we first convert key variables into appropriate factor types with interpretable labels. This step ensures that later summaries and models treat these variables correctly (for example, not treating 0/1 indicators as continuous). We also quantify missing values to confirm that the dataset is sufficiently complete for modeling.\n\n#Convert 0/1 indicators and coded categories to factors with labels\ndiabetes &lt;- diabetes |&gt; \n  mutate( \n    diabetes_binary = factor(diabetes_binary,\n                             levels = c(0,1),\n                             labels = c(\"No\", \"Yes\")),\n    #Binary indicators\n    high_bp = factor(high_bp, levels = c(0, 1), labels = c(\"No\", \"Yes\")),\n    high_chol = factor(high_chol, levels = c(0, 1), labels = c(\"No\", \"Yes\")),\n    chol_check = factor(chol_check, levels = c(0, 1), labels = c(\"No\", \"Yes\")),\n    smoker = factor(smoker, levels = c(0, 1), labels = c(\"No\", \"Yes\")),\n    stroke = factor(stroke, levels = c(0, 1), labels = c(\"No\", \"Yes\")),\n    heart_diseaseor_attack = factor(heart_diseaseor_attack, levels = c(0, 1), labels = c(\"No\", \"Yes\")),\n    phys_activity = factor(phys_activity, levels = c(0, 1), labels = c(\"No\", \"Yes\")),\n    fruits = factor(fruits, levels = c(0, 1), labels = c(\"No\", \"Yes\")),\n    veggies = factor(veggies, levels = c(0, 1), labels = c(\"No\", \"Yes\")),\n    hvy_alcohol_consump = factor(hvy_alcohol_consump, levels = c(0, 1), labels = c(\"No\", \"Yes\")),\n    any_healthcare = factor(any_healthcare, levels = c(0, 1), labels = c(\"No\", \"Yes\")),\n    no_docbc_cost = factor(no_docbc_cost, levels = c(0, 1), labels = c(\"No\", \"Yes\")),\n    diff_walk = factor(diff_walk, levels = c(0, 1), labels = c(\"No\", \"Yes\")),\n    sex = factor(sex, levels = c(0, 1), labels = c(\"Female\", \"Male\")),\n    \n    #Ordinal health status (self-reported)\n    gen_hlth = factor(\n      gen_hlth,\n      levels = 1:5,\n      labels = c(\"Excellent\", \"Very good\", \"Good\", \"Fair\", \"Poor\"), \n      ordered = TRUE\n    ),\n    \n    #Ordinal age (BRFSS coding)\n    age = factor(\n      age,\n      levels = 1:13,\n      labels = c(\n        \"18–24\", \"25–29\", \"30–34\", \"35–39\",\n        \"40–44\", \"45–49\", \"50–54\", \"55–59\",\n        \"60–64\", \"65–69\", \"70–74\", \"75–79\", \"80+\"),\n      ordered = TRUE\n    ),\n    \n    #Ordinal education\n    education = factor(\n      education,\n      levels = 1:6, \n      labels = c( \"No school/kindergarten\", \"Grades 1–8\", \"Grades 9–11\", \n                  \"High school/GED\", \"Some college\", \"College grad\" ), \n      ordered = TRUE \n      ),\n    \n    #Ordinal income\n    income = factor( \n      income, \n      levels = 1:8, \n      labels = c( \"&lt;$10k\", \"$10–15k\", \"$15–20k\", \"$20–25k\", \n                  \"$25–35k\", \"$35–50k\", \"$50–75k\", \"&gt;$75k\" ), \n      ordered = TRUE \n      )\n  )\n\n#Summarize missingness\nmissing_summary &lt;- diabetes |&gt;\n  summarize(across(everything(), ~sum(is.na(.)))) |&gt;\n  pivot_longer(everything(), \n               names_to = \"variable\",\n               values_to = \"n_missing\") |&gt;\n  mutate(pct_missing = n_missing / nrow(diabetes)) |&gt;\n  arrange(desc(n_missing))\n\nmissing_summary\n\n# A tibble: 22 × 3\n   variable               n_missing pct_missing\n   &lt;chr&gt;                      &lt;int&gt;       &lt;dbl&gt;\n 1 diabetes_binary                0           0\n 2 high_bp                        0           0\n 3 high_chol                      0           0\n 4 chol_check                     0           0\n 5 bmi                            0           0\n 6 smoker                         0           0\n 7 stroke                         0           0\n 8 heart_diseaseor_attack         0           0\n 9 phys_activity                  0           0\n10 fruits                         0           0\n# ℹ 12 more rows\n\n\nThe missingness summary indicates that most variables have very few (or no) missing values, so we proceed without additional imputation at the EDA stage.\n\n\nDistributional Summaries\nTo prepare for visual inspection and modeling, we summarize continuous and categorical variables separately, focusing on central tendency, spread, and level frequencies.\n\n#Categorical summaries for key factors\ncat_summary &lt;- diabetes |&gt;\n  select(diabetes_binary, high_bp, high_chol, smoker,\n          phys_activity, sex, age, gen_hlth, education, income) |&gt;\n  mutate(across(everything(), ~as.factor(as.character(.)))) |&gt;\n  pivot_longer(cols = everything(),\n               names_to = \"variable\",\n               values_to = \"level\") |&gt;\n  count(variable, level, name = \"n\") |&gt;\n  group_by(variable) |&gt;\n  mutate(pct = n / sum(n)) |&gt;\n  ungroup()\n\ncat_summary\n\n# A tibble: 44 × 4\n   variable level     n    pct\n   &lt;chr&gt;    &lt;fct&gt; &lt;int&gt;  &lt;dbl&gt;\n 1 age      18–24  5700 0.0225\n 2 age      25–29  7598 0.0300\n 3 age      30–34 11123 0.0438\n 4 age      35–39 13823 0.0545\n 5 age      40–44 16157 0.0637\n 6 age      45–49 19819 0.0781\n 7 age      50–54 26314 0.104 \n 8 age      55–59 30832 0.122 \n 9 age      60–64 33244 0.131 \n10 age      65–69 32194 0.127 \n# ℹ 34 more rows\n\n#Numeric Summaries\nnum_summary &lt;- diabetes |&gt;\n  select(where(is.numeric)) |&gt;\n  pivot_longer(cols = everything(),\n               names_to = \"variable\",\n               values_to = \"value\") |&gt;\n  group_by(variable) |&gt;\n  summarise(\n    mean = mean(value, na.rm = TRUE),\n    sd = sd(value, na.rm = TRUE),\n    min = min(value, na.rm = TRUE),\n    q25 = quantile(value, 0.25, na.rm = TRUE),\n    med = median(value, na.rm = TRUE),\n    q75 = quantile(value, 0.75, na.rm = TRUE),\n    max = max(value, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\nnum_summary\n\n# A tibble: 3 × 8\n  variable   mean    sd   min   q25   med   q75   max\n  &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 bmi       28.4   6.61    12    24    27    31    98\n2 ment_hlth  3.18  7.41     0     0     0     2    30\n3 phys_hlth  4.24  8.72     0     0     0     3    30\n\n\nContinuous predictors such as BMI, mental health days, and physical health days show right-skewed distributions, with medians equal to 0 for both health measures, indicating many respondents report no unhealthy days despite higher means. BMI ranges from 12 to 98, with a median of 27 and mean near 28.4, suggesting moderate skew and some extreme values. Age group frequencies confirm smaller representation in young adult ranges (18–39), and heavier concentration in middle and older adult ranges (50–74), which later supports exploring non-linear modeling methods that handle skew and mixed data types without transformation.\n\n\nCategorical Variable Balance\nMany of the predictors in this dataset are binary or ordered categorical variables, such as blood pressure status, general health, age group, and income. Before modeling, it is useful to look at how responses are distributed across levels to see which categories are common, which are rare, and whether there is any serious imbalance that might affect how models learn from these predictors.\n\n#Faceted bar plots for key variables \ndiabetes |&gt;\n  select(diabetes_binary, high_bp, high_chol, smoker,\n         phys_activity, sex) |&gt;\n  mutate(across(everything(), as.character)) |&gt;\n  pivot_longer(cols = everything(),\n               names_to = \"variable\",\n               values_to = \"level\") |&gt;\n  ggplot(aes(x = level)) +\n  geom_bar() +\n  facet_wrap(~ variable, scales = \"free_x\") +\n  labs(x = NULL, y = \"Count\",\n       title = \"Categorical variable level counts\")\n\n\n\n\n\n\n\n#Individual Bar Plots for remaining variables (to ensure clean visuals)\n#Age\ndiabetes |&gt; \n  ggplot(aes(x = age)) +\n  geom_bar() +\n  labs(x = \"Age Category\", y = \"Count\",\n       title = \"Age Level Counts\")\n\n\n\n\n\n\n\n#Education\ndiabetes |&gt;\n  ggplot(aes(x = education)) +\n  geom_bar() +\n  labs(x = \"Education Level\", y = \"Count\",\n       title = \"Education Level Counts\")\n\n\n\n\n\n\n\n#General Health\ndiabetes |&gt;\nggplot(aes(x = gen_hlth)) +\n  geom_bar() +\n  labs(x = \"General Health\", y = \"Count\",\n       title = \"General Health Level Counts\")\n\n\n\n\n\n\n\n#Income Level \ndiabetes |&gt;\n  ggplot(aes(x = income)) +\n  geom_bar() +\n  labs(x = \"Income Bracket\", y = \"Count\",\n       title = \"Income Level Counts\")\n\n\n\n\n\n\n\n\nIn short, the categorical predictors are clean and usable. The binary flags are balanced, while the ordinal categories are skewed toward older and higher-income respondents with some sparse levels. This supports evaluating flexible, non-linear models later.\n\n\nBivariate Relationships with Diabetes Status\nTo understand how individual predictors differ across diabetes status, we compare key categorical variables using cross-tabulated proportions, and examine numeric measures by outcome group to check for differences in central tendency and distributional overlap.\n\ndiabetes_by_binary &lt;- diabetes |&gt;\n  select(diabetes_binary, high_bp, high_chol, smoker, phys_activity) |&gt;\n  pivot_longer(cols = -diabetes_binary,\n               names_to = \"predictor\",\n               values_to = \"response\") |&gt;\n  group_by(predictor, diabetes_binary, response) |&gt;\n  summarise(n = n(), .groups = \"drop_last\") |&gt;\n  group_by(predictor, diabetes_binary) |&gt;\n  mutate(pct = round(n / sum(n), 4)) |&gt;\n  ungroup()\n\ndiabetes_by_binary\n\n# A tibble: 16 × 5\n   predictor     diabetes_binary response      n   pct\n   &lt;chr&gt;         &lt;fct&gt;           &lt;fct&gt;     &lt;int&gt; &lt;dbl&gt;\n 1 high_bp       No              No       136109 0.623\n 2 high_bp       No              Yes       82225 0.377\n 3 high_bp       Yes             No         8742 0.247\n 4 high_bp       Yes             Yes       26604 0.753\n 5 high_chol     No              No       134429 0.616\n 6 high_chol     No              Yes       83905 0.384\n 7 high_chol     Yes             No        11660 0.330\n 8 high_chol     Yes             Yes       23686 0.670\n 9 phys_activity No              No        48701 0.223\n10 phys_activity No              Yes      169633 0.777\n11 phys_activity Yes             No        13059 0.370\n12 phys_activity Yes             Yes       22287 0.630\n13 smoker        No              No       124228 0.569\n14 smoker        No              Yes       94106 0.431\n15 smoker        Yes             No        17029 0.482\n16 smoker        Yes             Yes       18317 0.518"
  }
]